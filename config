profiles {
  az_test {

    params.reads = 'az://orange/data/*_{1,2}.fastq.gz'
    params.orange_genome = 'az://orange/orange_genome/GCF_022201045.2_DVS_A1.0_genomic.fna'
    params.outdir = 'az://orange/results'
    
    process {
      executor = 'azurebatch'
    }

    azure {
      storage {
        accountName = "nfmetastore"
        accountKey = "mAiXMuZ7JAWQrPmayr5hHWY1Zh0MVcOUVUsJuFDmMvQPPQJkGuuHcf6lhcke6I6OalITZWCRuLSF+ASt31vMYw=="
      }
      batch {
        location = 'westeurope'
        accountName = 'nfmeta'
        accountKey = 'eQIrNRcKpr06JqEDjTlLIv/dCd4KNs5/DUV8OCJUbe9OkVB6goosq7W77Cj+u6IdO3Eq5fndWpVO+ABaXJXIrw=='
        autoPoolMode = true
        allowPoolCreation = true
        pools {
          auto {
              autoScale = true
              vmCount = 1
              maxVmCount = 10
          }
        }
      }
    }
  }
}